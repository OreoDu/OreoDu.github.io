{"title":"【持续更新】Hexo + inside 博客个性化定制","date":"2020-01-16T17:20:03.000Z","date_formatted":{"ll":"Jan 17, 2020","L":"01/17/2020","MM-DD":"01-17"},"thumbnail":"2020/hexo-theme-inside-plugin/hexo.png","link":"2020/hexo-theme-inside-plugin","comments":true,"tags":["Hexo","Valine"],"categories":["前端"],"updated":"2020-10-10T00:00:00.000Z","content":"<p><a href=\"https://blog.fiteen.top\" target=\"_blank\">我的博客</a>采用的是 <a href=\"https://hexo.io/themes/\" target=\"_blank\">Hexo 官方网站</a>上相中的 <a href=\"https://github.com/ikeq/hexo-theme-inside\" target=\"_blank\">hexo+theme+inside</a> 主题。虽然开发者已经提供了主题的<a href=\"https://blog.oniuo.com/theme-inside\" target=\"_blank\">使用文档</a>，但是作为一款小众的主题，一些常用功能的定制并不是那么完善，不过贴心的开发者提供了 <a href=\"https://blog.oniuo.com/theme-inside/docs/misc#plugins\" target=\"_blank\">plugins 配置方案</a>。</p>\n<a id=\"more\"></a>\n<p>下文总结了部分功能的拓展方案，可供需要的朋友参考。</p>\n<blockquote>\n<p><strong>注意</strong>：inside v2.6.3 之前会出现<strong>文章中点击上/下一篇时，插件无法生效的情况</strong>。<br>\n其原因是<strong>主题插件模块存在组件缓存问题，导致切换页面时 js 执行失败</strong>，为了保障功能正常使用，请务必将主题升级到<a href=\"https://github.com/ikeq/hexo-theme-inside/releases\" target=\"_blank\">最新版本</a>。（2020.03.14 更新）</p>\n</blockquote>\n<h2 id=\"plugin-前置准备\">plugin 前置准备<a title=\"#plugin-前置准备\" href=\"#plugin-前置准备\"></a></h2>\n<p><code>themes/inside/_config.yml</code> 中的 plugins 支持于特定位置动态插入可执行的代码片段，或全局加载脚本/样式。</p>\n<p>支持通过安装 html-minifier、babel 和 uglify-js 来实现代码压缩。 在项目根目录执行（Hexo 根目录，非 <code>themes/inside</code>）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install babel-core babel-preset-env html-minifier uglify-js --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"font-awesome\">Font Awesome<a title=\"#font-awesome\" href=\"#font-awesome\"></a></h2>\n<p>按照 plugin 配置描述的，要支持 Font Awesome 的 CSS，只需要这样设置：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css</span></span><br></pre></td></tr></table></figure>\n<p>也就是在全局加载样式，<s>不过不知道为什么没有正常生效🤔</s>（<strong><a href=\"https://github.com/ikeq/hexo-theme-inside/releases/tag/2.6.1\" target=\"_blank\">inside-v2.6.1</a> 已经修复了这个问题</strong>，建议你升级到<a href=\"https://github.com/ikeq/hexo-theme-inside/releases\" target=\"_blank\">最新版本</a>）。</p>\n<blockquote>\n<p>如果你是 v2.6.0 及以下版本，可以用这个方案解决：</p>\n<p>在 <code>themes/inside/layout/index.swig</code> 的 <code>&lt;head&gt;</code> 标签内加入以下代码：</p>\n<figure class=\"highlight html\"><figcaption><span>index.swig</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css&quot;</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>这时，虽然图标显示出来了，但是样式还是有点问题，可能和主题本身的 CSS 有关系，找到 <code>source</code> 目录下的 <code>styles.e4da61f53c7bc99becf4.css</code>（也可能叫别的） 里的 <code>.fa</code>，删除里面的 <code>margin:10rem 0 3rem;</code> 。</p>\n<p><img src=\"/2020/hexo-theme-inside-plugin/alter-style-css.png\" alt=\"修改 .fa 样式\" class=\"φcx\"></p>\n</blockquote>\n<p>不过个人觉得放在 CDN 上访问速度还是有点慢，所以从官网<a href=\"http://fontawesome.io\" target=\"_blank\">下载</a>最新版放在主题的 <code>source/lib</code> 目录下，全局引用：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">lib/font-awesome/css/font-awesome.min.css</span></span><br></pre></td></tr></table></figure>\n<p>或者在需要的位置引用 CSS 资源：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">href</span>=<span class=\"string\">&quot;lib/font-awesome/css/font-awesome.min.css&quot;</span> <span class=\"attr\">rel</span>=<span class=\"string\">&quot;stylesheet&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"访问量统计\">访问量统计<a title=\"#访问量统计\" href=\"#访问量统计\"></a></h2>\n<p>很多人都有站点访问量统计的需求，像这样：</p>\n<p><img src=\"/2020/hexo-theme-inside-plugin/busuanzi-example.png\" alt=\"访问量统计效果\" class=\"φcx\"></p>\n<p>我采用的是轻量的<a href=\"http://ibruce.info/2015/04/04/busuanzi/\" target=\"_blank\">不蒜子统计</a>来做访问量统计。</p>\n<p>先<strong>安装脚本</strong>，在使用不蒜子的页面，也就是 <code>sidebar</code> 模块插入 <code>busuanzi.js</code>。</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">position:</span> <span class=\"string\">sidebar</span></span><br><span class=\"line\">    <span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\">      <span class=\"string\">&lt;script</span> <span class=\"string\">async</span> <span class=\"string\">src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<p>再<strong>安装标签</strong>，官方给出了站点 PV/UV 的统计代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;busuanzi_container_site_pv&quot;</span>&gt;</span>本站总访问量<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>次<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;busuanzi_container_site_uv&quot;</span>&gt;</span>本站访客数<span class=\"tag\">&lt;<span class=\"name\">span</span> <span class=\"attr\">id</span>=<span class=\"string\">&quot;busuanzi_value_site_uv&quot;</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span>人次<span class=\"tag\">&lt;/<span class=\"name\">span</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>你也可以用这两个 id 来显示访问数：</p>\n<ul>\n<li><code>busuanzi_value_site_pv</code>：异步回填访问数</li>\n<li><code>busuanzi_container_site_pv</code>：为防止计数服务访问出错或超时（3 秒）的情况下，使整个标签自动隐藏显示</li>\n</ul>\n<p>在 <code>_config.yml</code> 文件里找到 <code>footer</code> 下的 <code>custom</code>，写入相关的 html 代码。比如：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Custom text</span></span><br><span class=\"line\"><span class=\"attr\">custom:</span> <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_container_site_uv&quot;</span> <span class=\"string\">style=&#x27;display:none&#x27;&gt;Total</span> <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;</span> <span class=\"string\">visitors.</span> <span class=\"string\">&lt;/span&gt;&lt;span</span> <span class=\"string\">id=&quot;busuanzi_container_site_pv&quot;</span> <span class=\"string\">style=&#x27;display:none&#x27;&gt;&lt;span</span> <span class=\"string\">id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;</span> <span class=\"string\">Views&lt;/span&gt;</span></span><br></pre></td></tr></table></figure>\n<p>或者使用 font-awesome 字体：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Custom text</span></span><br><span class=\"line\"><span class=\"attr\">custom:</span> <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_container_site_pv&quot;</span> <span class=\"string\">style=&#x27;display:none&#x27;&gt;&lt;i</span> <span class=\"string\">class=&quot;fa</span> <span class=\"string\">fa-eye&quot;&gt;&lt;/i&gt;</span> <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;&lt;/span&gt;</span> <span class=\"string\">｜</span> <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_container_site_uv&quot;</span> <span class=\"string\">style=&#x27;display:none&#x27;&gt;&lt;i</span> <span class=\"string\">class=&quot;fa</span> <span class=\"string\">fa-user&quot;&gt;&lt;/i&gt;</span> <span class=\"string\">&lt;span</span> <span class=\"string\">id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;/span&gt;&lt;/span&gt;</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"代码复制\">代码复制<a title=\"#代码复制\" href=\"#代码复制\"></a></h2>\n<p>为了方便博客的读者引用代码，可以在文章中代码块的右上角加一个复制按钮，如：</p>\n<p><img src=\"/2020/hexo-theme-inside-plugin/clipboard-example.png\" alt=\"代码块复制按钮效果\" class=\"φcx\"></p>\n<p>它的实现是在页面加载完毕后，使用 js 动态为每个代码块添加一个按钮，当鼠标滑动到代码块上时显示按钮，点击按钮时复制代码块里的内容。因此需要三个文件：</p>\n<ul>\n<li><strong>实现复制代码块功能</strong>的文件 <code>clipboard.js</code>，这里可以直接引用这个文件： <code>https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js</code>。</li>\n<li>支持<strong>动态创建复制按钮</strong>的文件 <code>clipboard-use.js</code></li>\n<li>复制按钮的<strong>样式</strong>文件 <code>clipboard.css</code></li>\n</ul>\n<p>页面载入完成后，创建一个复制按钮，上面用 font-awesome 的 clipboard 图标，实现如下：</p>\n<figure class=\"highlight js\"><figcaption><span>clipboard-use.js</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e, t, a</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> initCopyCode = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> copyHtml = <span class=\"string\">&#x27;&lt;button class=&quot;btn-copy&quot; data-clipboard-snippet=&quot;&quot;&gt;&lt;i class=&quot;fa fa-clipboard&quot;&gt;&lt;/i&gt;&lt;/button&gt;&#x27;</span>;</span><br><span class=\"line\">    $(<span class=\"string\">&quot;.highlight .code pre&quot;</span>).before(copyHtml);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ClipboardJS(<span class=\"string\">&#x27;.btn-copy&#x27;</span>, &#123;</span><br><span class=\"line\">      target: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">trigger</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> trigger.nextElementSibling;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  initCopyCode();</span><br><span class=\"line\">&#125;(<span class=\"built_in\">window</span>, <span class=\"built_in\">document</span>);</span><br></pre></td></tr></table></figure>\n<p>这里要注意的是， <code>clipboard-use.js</code> 中需要用到 <code>jQuery</code>，而 inside 里没有引入，故需要手动引入。</p>\n<p>复制按钮的样式如下：</p>\n<figure class=\"highlight css\"><figcaption><span>clipboard.css</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.highlight</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/* 方便 copy 代码按钮（btn-copy）的定位 */</span></span><br><span class=\"line\">    <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-width</span>: <span class=\"number\">0px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">13px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">2px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"attribute\">outline</span>: none;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-tap-highlight-color</span>: transparent;</span><br><span class=\"line\">    <span class=\"attribute\">-webkit-appearance</span>: none;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.highlight</span><span class=\"selector-pseudo\">:hover</span> <span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>复制按钮可以按照自己的喜好设置，如果想简单一点，直接用我的样式，可以这样配置：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"comment\"># inside 主题没有引入 jQuery 框架，需要手动引入</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js</span></span><br><span class=\"line\">  <span class=\"comment\"># 插件生效范围：post 和 page</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">position:</span> [<span class=\"string\">post</span>, <span class=\"string\">page</span>]</span><br><span class=\"line\">    <span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\">      <span class=\"string\">&lt;script</span> <span class=\"string\">type=&quot;text/javascript&quot;</span> <span class=\"string\">src=&quot;//cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;script</span> <span class=\"string\">type=&quot;text/javascript&quot;</span> <span class=\"string\">src=&quot;//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/clipboard-use.js&quot;&gt;&lt;/script&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;link</span> <span class=\"string\">href=&quot;//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.1/clipboard.css&quot;</span> <span class=\"string\">rel=&quot;stylesheet&quot;&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;link</span> <span class=\"string\">href=&quot;lib/font-awesome/css/font-awesome.min.css&quot;</span> <span class=\"string\">rel=&quot;stylesheet&quot;&gt;</span></span><br></pre></td></tr></table></figure>\n<p>如果已经全局引用过 font-awesome，可以把最后一条引用删除。</p>\n<h2 id=\"评论系统---valine\">评论系统 - Valine<a title=\"#评论系统---valine\" href=\"#评论系统---valine\"></a></h2>\n<p>主题的内置评论，支持 <a href=\"https://disqus.com\" target=\"_blank\">Disqus</a> 和 <a href=\"https://livere.com\" target=\"_blank\">LiveRe</a>。但个人认为这两款评论系统的 UI 风格主题不是很搭配，最后还是决定采用 <a href=\"https://valine.js.org\" target=\"_blank\">Valine</a>——一款基于 LeanCloud 的快速、简洁且高效的无后端评论系统。</p>\n<p>虽然文档中也有提供 Valine 的配置方法，但是我实践后发现样式貌似出现了一些问题，这条 <a href=\"https://github.com/ikeq/hexo-theme-inside/issues/153\" target=\"_blank\">issue</a> 也证实了这一点（<strong>inside-2.6.1 已修复</strong>）。所以我另找了一个 js 文件，并做了一点小改动。你可以引用我放在 CDN 上的资源 <code>https://cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/valine.js</code>，或者直接把 <code>valine.js</code> 文件<a href=\"https://github.com/fiteen/fiteen.github.io/releases\" target=\"_blank\">下载</a>到本地，放在 <code>inside/source/lib</code>路径下。然后写入以下代码：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"comment\"># inside 主题没有引入 jQuery 框架，需要手动引入</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.7/av-min.js</span></span><br><span class=\"line\">  <span class=\"comment\"># 引用本地 source/lib 路径下的 valine.js 文件</span></span><br><span class=\"line\">  <span class=\"comment\"># - lib/valine.js</span></span><br><span class=\"line\">  <span class=\"comment\"># 引用 CDN 上的 valine.js 文件</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/valine.js</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">position:</span> <span class=\"string\">comments</span></span><br><span class=\"line\">    <span class=\"attr\">template:</span> <span class=\"string\">|</span></span><br><span class=\"line\">      <span class=\"string\">&lt;div</span> <span class=\"string\">id=&quot;vcomment&quot;&gt;&lt;/div&gt;</span></span><br><span class=\"line\">      <span class=\"string\">&lt;script&gt;</span></span><br><span class=\"line\">        <span class=\"string\">new</span> <span class=\"string\">Valine(&#123;</span></span><br><span class=\"line\">          <span class=\"attr\">el:</span> <span class=\"string\">&#x27;#vcomment&#x27;</span><span class=\"string\">,</span></span><br><span class=\"line\">          <span class=\"attr\">lang:</span> <span class=\"string\">&#x27;en&#x27;</span><span class=\"string\">,</span></span><br><span class=\"line\">          <span class=\"attr\">admin_email:</span> <span class=\"string\">&#x27;Your EMAIL&#x27;</span><span class=\"string\">,</span></span><br><span class=\"line\">          <span class=\"attr\">appId:</span> <span class=\"string\">&#x27;Your APP ID&#x27;</span><span class=\"string\">,</span></span><br><span class=\"line\">          <span class=\"attr\">appKey:</span> <span class=\"string\">&#x27;Your APP KEY&#x27;</span><span class=\"string\">,</span></span><br><span class=\"line\">          <span class=\"attr\">placeholder:</span> <span class=\"string\">&#x27;Write a Comment&#x27;</span><span class=\"string\">,</span></span><br><span class=\"line\">          <span class=\"string\">emoticon_url:&#x27;https://cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@0.1.0/alu&#x27;,</span></span><br><span class=\"line\">          <span class=\"string\">emoticon_list:[&quot;吐.png&quot;,&quot;喷血.png&quot;,&quot;狂汗.png&quot;,&quot;不说话.png&quot;,&quot;汗.png&quot;,&quot;坐等.png&quot;,&quot;献花.png&quot;,&quot;不高兴.png&quot;,&quot;中刀.png&quot;,&quot;害羞.png&quot;,&quot;皱眉.png&quot;,&quot;小眼睛.png&quot;,&quot;中指.png&quot;,&quot;尴尬.png&quot;,&quot;瞅你.png&quot;,&quot;想一想.png&quot;,&quot;中枪.png&quot;,&quot;得意.png&quot;,&quot;肿包.png&quot;,&quot;扇耳光.png&quot;,&quot;亲亲.png&quot;,&quot;惊喜.png&quot;,&quot;脸红.png&quot;,&quot;无所谓.png&quot;,&quot;便便.png&quot;,&quot;愤怒.png&quot;,&quot;蜡烛.png&quot;,&quot;献黄瓜.png&quot;,&quot;内伤.png&quot;,&quot;投降.png&quot;,&quot;观察.png&quot;,&quot;看不见.png&quot;,&quot;击掌.png&quot;,&quot;抠鼻.png&quot;,&quot;邪恶.png&quot;,&quot;看热闹.png&quot;,&quot;口水.png&quot;,&quot;抽烟.png&quot;,&quot;锁眉.png&quot;,&quot;装大款.png&quot;,&quot;吐舌.png&quot;,&quot;无奈.png&quot;,&quot;长草.png&quot;,&quot;赞一个.png&quot;,&quot;呲牙.png&quot;,&quot;无语.png&quot;,&quot;阴暗.png&quot;,&quot;不出所料.png&quot;,&quot;咽气.png&quot;,&quot;期待.png&quot;,&quot;高兴.png&quot;,&quot;吐血倒地.png&quot;,&quot;哭泣.png&quot;,&quot;欢呼.png&quot;,&quot;黑线.png&quot;,&quot;喜极而泣.png&quot;,&quot;喷水.png&quot;,&quot;深思.png&quot;,&quot;鼓掌.png&quot;,&quot;暗地观察.png&quot;],</span></span><br><span class=\"line\">        <span class=\"string\">&#125;)</span></span><br><span class=\"line\">      <span class=\"string\">&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>\n<p>关于上面的参数介绍：</p>\n<ul>\n<li><strong>lang</strong>：选填，目前支持英文版 <code>en</code> 和中文版 <code>zh-cn</code> 两种，默认是 <code>zh-cn</code>。</li>\n<li><strong>admin_email</strong>：选填，设置作者邮箱，使用该邮箱账号评论或回复，评论者名字右侧会出现一个人形小图标标识作者。</li>\n<li><strong>appId&amp;appKey</strong>：必填，LeanCloud 中创建应用得到的 <code>APP ID</code> 和 <code>APP KEY</code>，创建方式参照<a href=\"https://ioliu.cn/2017/add-valine-comments-to-your-blog/\" target=\"_blank\">此文</a>。</li>\n<li><strong>emoticon_url</strong>：必填，这里设置一个表情包 CDN 路径，你也可以自定义喜欢的表情包。</li>\n<li><strong>emoticon_list</strong>：必填，<code>emoticon_url</code>里包含的表情包中需要显示在评论区的表情包名称列表。</li>\n</ul>\n<p><img src=\"/2020/hexo-theme-inside-plugin/valine-comment-example.png\" alt=\"评论区效果\" class=\"φcx\"></p>\n<p>这就是配置成功后的评论框效果。</p>\n<p>目前已经有 Valine 评论系统的拓展和增强版 <a href=\"https://github.com/DesertsP/Valine-Admin.git\" target=\"_blank\">Valine+Admin</a>，主要实现评论邮件通知、评论管理、垃圾评论过滤等功能，还支持自定义修改邮件通知模板、漏发邮件自动补发等。具体步骤这篇<a href=\"https://deserts.io/valine-admin-document/\" target=\"_blank\">配置手册</a>已经比较清晰了，照着上面的步骤操作即可，本文就不复制粘贴了。</p>\n<p><strong>注意</strong>：想要在评论区显示自定义头像，先前往<a href=\"http://cn.gravatar.com/\" target=\"_blank\">Gravatar 官网</a>注册账号，注册的邮箱需要和你评论时填写的邮箱一致。如果注册成功后，头像仍没有显示，不要着急， <code>gravatar.cat.net</code> 有七天的缓存期，请耐心等待。</p>\n<h2 id=\"颜色盘\">颜色盘<a title=\"#颜色盘\" href=\"#颜色盘\"></a></h2>\n<p>同样是在 <code>_config.yml</code> 的中插入配置代码。</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">plugins:</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//blog.oniuo.com/theme.js</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"string\">//blog.oniuo.com/wc.cc9a2092fece1d80bf3b.js</span></span><br><span class=\"line\">  <span class=\"bullet\">-</span> <span class=\"attr\">position:</span> <span class=\"string\">sidebar</span></span><br><span class=\"line\">    <span class=\"attr\">template:</span> <span class=\"string\">&lt;is-palette2&gt;&lt;/is-palette2&gt;</span></span><br></pre></td></tr></table></figure>\n<p>下面再分享几个<strong>小功能点的配置</strong>：</p>\n<h2 id=\"博客背景\">博客背景<a title=\"#博客背景\" href=\"#博客背景\"></a></h2>\n<p>修改博客背景很简单，只需修改 <code>themes/inside/_config.yml</code> 中 <code>appearance.background</code> 配置即可。</p>\n<p>这里分享一个网站——<a href=\"https://www.toptal.com/designers/subtlepatterns/\" target=\"_blank\">Subtle Patterns</a>，支持超过 500 种 PNG 高品质免费背景纹理素材，无须注册登录，可以直接下载。</p>\n<h2 id=\"博客字体\">博客字体<a title=\"#博客字体\" href=\"#博客字体\"></a></h2>\n<p>你可能会发现部署好的博客首次加载时的字体效果生效比较慢，这是因为主题中默认配置的字体样式用的是谷歌的服务：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">appearance:</span></span><br><span class=\"line\">  <span class=\"attr\">font:</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">//fonts.googleapis.com/css?family=Baloo+Bhaijaan|Inconsolata|Josefin+Sans|Montserrat</span></span><br></pre></td></tr></table></figure>\n<p>如果被墙了就无法正常显示，因此我们可以换一个访问更快的地址，如：</p>\n<figure class=\"highlight yaml\"><figcaption><span>_config.yml</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">appearance:</span></span><br><span class=\"line\">  <span class=\"attr\">font:</span></span><br><span class=\"line\">    <span class=\"attr\">url:</span> <span class=\"string\">//cdn.jsdelivr.net/gh/fiteen/fiteen.github.io@v0.1.0/font.css</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"分享-qq-链接\">分享 QQ 链接<a title=\"#分享-qq-链接\" href=\"#分享-qq-链接\"></a></h2>\n<p>我们可以在 <code>sns.qq</code> 里配置自己想要链接的 QQ ID 信息，直接写 QQ 号当然是不可行的。需要先开通 <a href=\"https://shang.qq.com/v3/widget.html\" target=\"_blank\">QQ 推广</a>。</p>\n<p><img src=\"/2020/hexo-theme-inside-plugin/qq-link.png\" alt class=\"φcx\"></p>\n<p><code>&lt;a&gt;</code> 标签里的 <code>href</code> 就是你的 <strong>QQ 号</strong>分享链接，形如：<code>https://wpa.qq.com/msgrd?v=3&amp;uin=$&#123;YOUR-QQ-ID&#125;&amp;site=qq&amp;menu=yes</code>。</p>\n<p>如果你要<strong>分享群号</strong>，通过<a href=\"https://qun.qq.com/join.html\" target=\"_blank\">加群组件</a>，拿到形如：<code>https://shang.qq.com/wpa/qunwpa?idkey=$&#123;YOUR-GROUP-ID-KEY&#125;</code> 的链接。</p>\n<h2 id=\"配置-rss\">配置 RSS<a title=\"#配置-rss\" href=\"#配置-rss\"></a></h2>\n<p>比较简单，<a href=\"https://blog.oniuo.com/theme-inside/docs/basic#sns\" target=\"_blank\">文档</a>中有提到：</p>\n<blockquote>\n<p>若使用 hexo-generator-feed，sns.feed 可留空，主题会尝试取 hexo.config.feed.path。可通过改变项的先后顺序来自定义排序。</p>\n</blockquote>\n<p>因此直接在站点根目录（不是主题根目录）下执行命令即可：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>\n<h2 id=\"q-&amp;-a\">Q &amp; A<a title=\"#q-&amp;-a\" href=\"#q-&amp;-a\"></a></h2>\n<p><strong>问题 1：为什么我按照文档设置了，加了插件设置后，不但没有生效，其它功能还出了问题或者工程都跑不起来了？</strong></p>\n<ol>\n<li>检查一下配置代码的空格，yml 文件对代码格式的要求比较严格。</li>\n<li>检查是否重复添加了 <code>plugins:</code>，添加多个插件也只需要声明一次。</li>\n</ol>\n<p><strong>问题 2：能否出一个小白教程？</strong></p>\n<p>可以在评论区描述你的问题，我会抽空整理到一起，补充在博客中。</p>\n<p><strong>问题 3：我希望博客可以支持某某功能，但是不知道该怎么做，能否帮忙实现一下？</strong></p>\n<p>可以提 <a href=\"https://github.com/fiteen/fiteen.github.io/issues\" target=\"_blank\">issue</a> 给我。</p>\n","prev":{"title":"iOS runtime 机制解读（结合 objc4 源码）","link":"2020/ios-runtime"},"next":{"title":"红黑树详细图解","link":"2020/red-black-tree"},"plink":"https://oreodu.github.io/2020/hexo-theme-inside-plugin/","toc":[{"id":"plugin-前置准备","title":"plugin 前置准备","index":"1"},{"id":"font-awesome","title":"Font Awesome","index":"2"},{"id":"访问量统计","title":"访问量统计","index":"3"},{"id":"代码复制","title":"代码复制","index":"4"},{"id":"评论系统---valine","title":"评论系统 - Valine","index":"5"},{"id":"颜色盘","title":"颜色盘","index":"6"},{"id":"博客背景","title":"博客背景","index":"7"},{"id":"博客字体","title":"博客字体","index":"8"},{"id":"分享-qq-链接","title":"分享 QQ 链接","index":"9"},{"id":"配置-rss","title":"配置 RSS","index":"10"},{"id":"q-&amp;-a","title":"Q &amp; A","index":"11"}],"reward":true,"copyright":{"author":"Oreo Du","link":"<a href=\"https://oreodu.github.io/2020/hexo-theme-inside-plugin/\" title=\"【持续更新】Hexo + inside 博客个性化定制\">https://oreodu.github.io/2020/hexo-theme-inside-plugin/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"}}